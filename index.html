<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>LÃ‰O KAZAMA | ULTIMATE SCANNER 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --neon: #00ffcc; --bg: #050505; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; display: flex; height: 100vh; }
        .side { width: 350px; background: #111; border-right: 2px solid var(--neon); padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #000; }
        .video-box { width: 90%; aspect-ratio: 16/9; border: 2px solid #222; border-radius: 15px; overflow: hidden; }
        video { width: 100%; height: 100%; }
        button { background: var(--neon); color: #000; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        input { background: #222; color: #fff; border: 1px solid #333; padding: 12px; border-radius: 8px; }
        #list { overflow-y: auto; flex-grow: 1; margin-top: 15px; }
        .channel { padding: 10px; border-bottom: 1px solid #222; cursor: pointer; font-size: 13px; transition: 0.3s; }
        .channel:hover { background: #222; color: var(--neon); }
    </style>
</head>
<body>

<div class="side">
    <h2 style="text-align:center; color: var(--neon);">LÃ‰O KAZAMA VIP</h2>
    
    <p style="font-size: 10px; color: #888;">BUSCA AVANÃ‡ADA 2026 (SEM BLOQUEIO)</p>
    
    <button onclick="fetchVerified('br')">ðŸ‡§ðŸ‡· CANAIS BRASIL (VIA API)</button>
    <button onclick="fetchVerified('us')" style="background: #333; color: #fff; margin-top:5px;">ðŸ‡ºðŸ‡¸ FILMES/INTERNACIONAL</button>
    
    <hr style="border: 0; border-top: 1px solid #333; margin: 15px 0;">
    
    <input type="text" id="search" placeholder="ðŸ” Filtrar canal..." onkeyup="filter()">
    
    <div id="list">
        <p style="text-align: center; color: #555;">Clique em um botÃ£o para varrer canais vÃ¡lidos...</p>
    </div>
</div>

<div class="main">
    <div class="video-box">
        <video id="player" controls autoplay></video>
    </div>
    <div id="title" style="margin-top: 20px; color: var(--neon); font-size: 18px; font-weight: bold;"></div>
</div>

<script>
    let hls = new Hls();
    let channels = [];
    const video = document.getElementById('player');

    // BUSCA AVANÃ‡ADA: Acessa direto o banco de dados JSON (evita erro de proxy)
    async function fetchVerified(geo) {
        document.getElementById('list').innerHTML = "<p style='text-align:center; color: var(--neon);'>ESCANEANDO SATÃ‰LITES...</p>";
        
        const url = `https://iptv-org.github.io/iptv/countries/${geo}.m3u`;
        
        try {
            // Usando um proxy diferente e mais limpo
            const response = await fetch(`https://corsproxy.io/?${encodeURIComponent(url)}`);
            const data = await response.text();
            
            if (data.includes('#EXTM3U')) {
                parse(data);
            } else {
                throw new Error();
            }
        } catch (e) {
            // BACKUP: Se o proxy falhar, tenta o link bruto (alguns navegadores permitem)
            try {
                const res = await fetch(url);
                const text = await res.text();
                parse(text);
            } catch (err) {
                alert("Erro crÃ­tico de conexÃ£o. O servidor de listas estÃ¡ em manutenÃ§Ã£o.");
            }
        }
    }

    function parse(data) {
        const lines = data.split('\n');
        channels = [];
        for (let i = 0; i < lines.length; i++) {
            if (lines[i].includes('#EXTINF')) {
                const name = lines[i].split(',')[1] || "Canal";
                const url = lines[i+1]?.trim();
                if (url && url.startsWith('http')) {
                    channels.push({ name, url });
                }
            }
        }
        render(channels);
    }

    function render(list) {
        const container = document.getElementById('list');
        container.innerHTML = "";
        list.forEach(c => {
            const div = document.createElement('div');
            div.className = 'channel';
            div.innerText = c.name;
            div.onclick = () => {
                document.getElementById('title').innerText = "ðŸ“¡ " + c.name;
                play(c.url);
            };
            container.appendChild(div);
        });
    }

    function play(url) {
        if (Hls.isSupported()) {
            hls.destroy();
            hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        } else {
            video.src = url;
            video.play();
        }
    }

    function filter() {
        const query = document.getElementById('search').value.toLowerCase();
        render(channels.filter(c => c.name.toLowerCase().includes(query)));
    }
</script>
</body>
</html>
