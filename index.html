<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>GERENCIADOR: nenasbenas/Lista_public</title>
    <style>
        body { background: #000510; color: #fff; font-family: sans-serif; text-align: center; padding: 50px; }
        .box { border: 2px solid #00aaff; padding: 20px; border-radius: 10px; display: inline-block; background: #111; }
        input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        button { background: #00ccff; border: none; padding: 15px; width: 100%; color: #000; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="box">
        <h2>GERENCIADOR: nenasbenas/Lista_public</h2>
        <input type="password" id="token" placeholder="CHAVE MESTRA (TOKEN):">
        <input type="text" id="url" placeholder="LINK PARA ADICIONAR:">
        <button onclick="sincronizar()">SINCRONIZAR NO BACKUP 2026</button>
        <p id="status"></p>
    </div>

    <script>
        async function sincronizar() {
            const token = document.getElementById('token').value;
            const url = document.getElementById('url').value;
            const status = document.getElementById('status');
            const repo = 'nenasbenas/lista_public';
            const path = 'player_completo.m3u'; // Nome exato do seu arquivo

            status.innerText = "Sincronizando...";

            try {
                const res = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                    headers: { 'Authorization': `token ${token}` }
                });
                const data = await res.json();
                const content = atob(data.sha ? data.content : "");
                const newContent = btoa(content + "\n" + url);

                const update = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                    method: 'PUT',
                    headers: { 'Authorization': `token ${token}`, 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: "Update via Panel",
                        content: newContent,
                        sha: data.sha
                    })
                });

                if(update.ok) { status.innerText = "SINCRONIZADO COM SUCESSO!"; }
                else { status.innerText = "Erro na Chave Mestra!"; }
            } catch(e) { status.innerText = "Erro de Conex√£o!"; }
        }
    </script>
</body>
</html>
